<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URC Fantasy League - Test</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test { margin: 10px 0; padding: 10px; border: 1px solid #ccc; }
        .pass { background: #d4edda; color: #155724; }
        .fail { background: #f8d7da; color: #721c24; }
        h2 { color: #333; }
    </style>
</head>
<body>
    <h1>URC Fantasy League - System Test</h1>
    <div id="results"></div>

    <script>
        const results = document.getElementById('results');
        let testsPassed = 0;
        let totalTests = 0;

        function addTest(name, passed, details) {
            totalTests++;
            if (passed) testsPassed++;
            
            const div = document.createElement('div');
            div.className = `test ${passed ? 'pass' : 'fail'}`;
            div.innerHTML = `
                <strong>${name}:</strong> ${passed ? '✓ PASS' : '✗ FAIL'}
                ${details ? `<br><small>${details}</small>` : ''}
            `;
            results.appendChild(div);
        }

        // Test 1: CryptoJS Library
        addTest(
            'CryptoJS Library Loaded',
            typeof CryptoJS !== 'undefined' && typeof CryptoJS.SHA256 === 'function',
            `CryptoJS available: ${typeof CryptoJS !== 'undefined'}`
        );

        // Test 2: Password Hashing
        try {
            const testPassword = 'test123';
            const hash = CryptoJS.SHA256(testPassword).toString();
            addTest(
                'Password Hashing',
                hash.length === 64,
                `Hash length: ${hash.length} (expected: 64)`
            );
        } catch (e) {
            addTest('Password Hashing', false, e.message);
        }

        // Test 3: Date Parsing with Timezone
        const testDate = '2025-09-26';
        const testTime = '18:00';
        const date1 = new Date(testDate + 'T00:00:00');
        const date2 = new Date(`${testDate}T${testTime}:00`);
        
        addTest(
            'Date Parsing (with T00:00:00)',
            !isNaN(date1),
            `Date: ${date1}`
        );
        
        addTest(
            'Date Time Parsing (with full time)',
            !isNaN(date2),
            `DateTime: ${date2}`
        );

        // Test 4: Date Formatting
        if (!isNaN(date2)) {
            try {
                const formatted = date2.toLocaleDateString('en-GB', {
                    weekday: 'short',
                    day: 'numeric',
                    month: 'short'
                });
                addTest(
                    'Date Formatting',
                    formatted.length > 0,
                    `Formatted: ${formatted}`
                );
            } catch (e) {
                addTest('Date Formatting', false, e.message);
            }
        }

        // Test 5: LocalStorage
        try {
            localStorage.setItem('test', 'value');
            const value = localStorage.getItem('test');
            localStorage.removeItem('test');
            addTest(
                'LocalStorage Access',
                value === 'value',
                'LocalStorage is working'
            );
        } catch (e) {
            addTest('LocalStorage Access', false, e.message);
        }

        // Test 6: Form Elements
        const testForm = document.createElement('form');
        const testInput = document.createElement('input');
        testInput.type = 'email';
        testInput.value = 'test@example.com';
        testForm.appendChild(testInput);
        document.body.appendChild(testForm);
        
        addTest(
            'Form Elements Creation',
            testInput.value === 'test@example.com',
            'Form elements can be created and accessed'
        );
        
        document.body.removeChild(testForm);

        // Summary
        const summary = document.createElement('div');
        summary.style.marginTop = '20px';
        summary.style.fontSize = '1.2em';
        summary.style.fontWeight = 'bold';
        summary.style.color = testsPassed === totalTests ? 'green' : 'red';
        summary.textContent = `Tests Passed: ${testsPassed}/${totalTests}`;
        results.appendChild(summary);

        // Recommendations
        if (testsPassed < totalTests) {
            const rec = document.createElement('div');
            rec.style.marginTop = '10px';
            rec.style.padding = '10px';
            rec.style.background = '#fff3cd';
            rec.style.border = '1px solid #ffc107';
            rec.innerHTML = `
                <strong>Recommendations:</strong><br>
                - Clear browser cache and reload<br>
                - Check browser console for errors<br>
                - Ensure JavaScript is enabled<br>
                - Try a different browser if issues persist
            `;
            results.appendChild(rec);
        }
    </script>
</body>
</html>